# ğŸ”„ HÆ°á»›ng dáº«n sá»­ dá»¥ng tÃ­nh nÄƒng Change Booking

## ğŸ“‹ Tá»•ng quan

TÃ­nh nÄƒng Change Booking cho phÃ©p khÃ¡ch hÃ ng gá»­i yÃªu cáº§u thay Ä‘á»•i hoáº·c há»§y booking, vÃ  Admin/Manager cÃ³ thá»ƒ phÃª duyá»‡t hoáº·c tá»« chá»‘i cÃ¡c yÃªu cáº§u nÃ y.

## ğŸ¯ CÃ¡c tÃ­nh nÄƒng chÃ­nh

### 1. **Gá»­i yÃªu cáº§u thay Ä‘á»•i booking (Customer)**
- KhÃ¡ch hÃ ng cÃ³ thá»ƒ gá»­i yÃªu cáº§u thay Ä‘á»•i thÃ´ng tin booking (phÃ²ng, ngÃ y check-in/check-out)
- KhÃ¡ch hÃ ng cÃ³ thá»ƒ gá»­i yÃªu cáº§u há»§y booking vá»›i lÃ½ do cá»¥ thá»ƒ
- Má»—i booking chá»‰ cÃ³ thá»ƒ cÃ³ má»™t yÃªu cáº§u Ä‘ang chá» xá»­ lÃ½

### 2. **Quáº£n lÃ½ yÃªu cáº§u thay Ä‘á»•i (Admin/Manager)**
- Xem danh sÃ¡ch táº¥t cáº£ yÃªu cáº§u thay Ä‘á»•i
- Lá»c theo tráº¡ng thÃ¡i: Chá» xá»­ lÃ½, ÄÃ£ phÃª duyá»‡t, ÄÃ£ tá»« chá»‘i
- PhÃª duyá»‡t hoáº·c tá»« chá»‘i yÃªu cáº§u vá»›i lÃ½ do cá»¥ thá»ƒ
- Tá»± Ä‘á»™ng cáº­p nháº­t booking khi phÃª duyá»‡t

### 3. **ÄÃ¡nh dáº¥u thanh toÃ¡n**
- Admin/Manager cÃ³ thá»ƒ Ä‘Ã¡nh dáº¥u booking Ä‘Ã£ thanh toÃ¡n
- Chá»‰ hiá»ƒn thá»‹ cho cÃ¡c booking chÆ°a thanh toÃ¡n

## ğŸš€ CÃ¡ch sá»­ dá»¥ng

### **Cho KhÃ¡ch hÃ ng:**

1. **Gá»­i yÃªu cáº§u thay Ä‘á»•i:**
   - VÃ o trang Quáº£n lÃ½ Ä‘áº·t phÃ²ng
   - Nháº¥n nÃºt "YÃªu cáº§u thay Ä‘á»•i" (biá»ƒu tÆ°á»£ng Ä‘á»•i) trÃªn booking cáº§n thay Ä‘á»•i
   - Chá»n loáº¡i yÃªu cáº§u: "Thay Ä‘á»•i thÃ´ng tin" hoáº·c "Há»§y booking"
   - Äiá»n thÃ´ng tin má»›i hoáº·c lÃ½ do há»§y
   - Nháº¥n "Gá»­i yÃªu cáº§u"

2. **Theo dÃµi tráº¡ng thÃ¡i:**
   - YÃªu cáº§u sáº½ Ä‘Æ°á»£c gá»­i vÃ  chá» Admin/Manager phÃª duyá»‡t
   - Há»‡ thá»‘ng sáº½ thÃ´ng bÃ¡o khi yÃªu cáº§u Ä‘Æ°á»£c xá»­ lÃ½

### **Cho Admin/Manager:**

1. **Xem yÃªu cáº§u thay Ä‘á»•i:**
   - VÃ o trang Quáº£n lÃ½ Ä‘áº·t phÃ²ng
   - Nháº¥n nÃºt "Quáº£n lÃ½ yÃªu cáº§u thay Ä‘á»•i" (biá»ƒu tÆ°á»£ng danh sÃ¡ch)
   - Hoáº·c truy cáº­p trá»±c tiáº¿p trang "Quáº£n lÃ½ yÃªu cáº§u thay Ä‘á»•i booking"

2. **PhÃª duyá»‡t yÃªu cáº§u:**
   - Xem thÃ´ng tin yÃªu cáº§u chi tiáº¿t
   - Nháº¥n "PhÃª duyá»‡t" Ä‘á»ƒ cháº¥p nháº­n yÃªu cáº§u
   - Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng cáº­p nháº­t booking

3. **Tá»« chá»‘i yÃªu cáº§u:**
   - Nháº¥n "Tá»« chá»‘i" vÃ  nháº­p lÃ½ do tá»« chá»‘i
   - YÃªu cáº§u sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  "ÄÃ£ tá»« chá»‘i"

4. **ÄÃ¡nh dáº¥u thanh toÃ¡n:**
   - Nháº¥n nÃºt "ÄÃ¡nh dáº¥u Ä‘Ã£ thanh toÃ¡n" (biá»ƒu tÆ°á»£ng check) trÃªn booking
   - Tráº¡ng thÃ¡i thanh toÃ¡n sáº½ Ä‘Æ°á»£c cáº­p nháº­t thÃ nh "Paid"

## ğŸ”§ CÃ¡c API endpoints

### **Backend APIs:**
- `GET /bookings/bookingChangeRequests` - Láº¥y danh sÃ¡ch yÃªu cáº§u
- `POST /bookings/bookingChangeRequests/update` - Gá»­i yÃªu cáº§u thay Ä‘á»•i
- `POST /bookings/bookingChangeRequests/cancel` - Gá»­i yÃªu cáº§u há»§y
- `PUT /bookings/bookingChangeRequests/:id/approve` - PhÃª duyá»‡t yÃªu cáº§u
- `PUT /bookings/bookingChangeRequests/:id/disapprove` - Tá»« chá»‘i yÃªu cáº§u
- `PUT /bookings/markBookingPaid/:id` - ÄÃ¡nh dáº¥u thanh toÃ¡n

### **Frontend Components:**
- `BookingChangeRequestsModal` - Modal quáº£n lÃ½ yÃªu cáº§u thay Ä‘á»•i
- `RequestBookingChangeModal` - Modal gá»­i yÃªu cáº§u thay Ä‘á»•i
- `BookingChangeRequestsPage` - Trang riÃªng quáº£n lÃ½ yÃªu cáº§u

## ğŸ›¡ï¸ Báº£o máº­t vÃ  phÃ¢n quyá»n

### **Customer:**
- âœ… Chá»‰ cÃ³ thá»ƒ gá»­i yÃªu cáº§u cho booking cá»§a chÃ­nh mÃ¬nh
- âœ… Chá»‰ cÃ³ thá»ƒ xem booking cá»§a chÃ­nh mÃ¬nh
- âŒ KhÃ´ng thá»ƒ phÃª duyá»‡t yÃªu cáº§u

### **Manager/Admin:**
- âœ… CÃ³ thá»ƒ xem táº¥t cáº£ yÃªu cáº§u thay Ä‘á»•i
- âœ… CÃ³ thá»ƒ phÃª duyá»‡t/tá»« chá»‘i yÃªu cáº§u
- âœ… CÃ³ thá»ƒ Ä‘Ã¡nh dáº¥u thanh toÃ¡n cho má»i booking
- âœ… CÃ³ thá»ƒ cáº­p nháº­t booking trá»±c tiáº¿p

## ğŸ“Š Tráº¡ng thÃ¡i vÃ  Workflow

### **BookingChangeRequest Status:**
- `Pending` - Chá» phÃª duyá»‡t
- `Approved` - ÄÃ£ phÃª duyá»‡t
- `Disapproved` - ÄÃ£ tá»« chá»‘i

### **Booking Status:**
- `Confirmed` - ÄÃ£ xÃ¡c nháº­n
- `Cancelled` - ÄÃ£ há»§y

### **Payment Status:**
- `Unpaid` - ChÆ°a thanh toÃ¡n
- `Paid` - ÄÃ£ thanh toÃ¡n
- `Refund Pending` - Chá» hoÃ n tiá»n

## âš ï¸ LÆ°u Ã½ quan trá»ng

1. **Xung Ä‘á»™t booking:** Khi phÃª duyá»‡t yÃªu cáº§u thay Ä‘á»•i, há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng há»§y cÃ¡c booking xung Ä‘á»™t
2. **Validation:** Táº¥t cáº£ ngÃ y thÃ¡ng vÃ  thÃ´ng tin phÃ²ng Ä‘á»u Ä‘Æ°á»£c validate ká»¹ lÆ°á»¡ng
3. **Audit trail:** Má»i thay Ä‘á»•i Ä‘á»u Ä‘Æ°á»£c ghi láº¡i vá»›i thÃ´ng tin ngÆ°á»i thá»±c hiá»‡n vÃ  thá»i gian
4. **Real-time updates:** Danh sÃ¡ch booking sáº½ Ä‘Æ°á»£c cáº­p nháº­t ngay sau khi cÃ³ thay Ä‘á»•i

## ğŸ¨ UI/UX Features

- **Responsive design:** Hoáº¡t Ä‘á»™ng tá»‘t trÃªn má»i thiáº¿t bá»‹
- **Intuitive icons:** Sá»­ dá»¥ng icon trá»±c quan cho cÃ¡c hÃ nh Ä‘á»™ng
- **Status badges:** Hiá»ƒn thá»‹ tráº¡ng thÃ¡i rÃµ rÃ ng vá»›i mÃ u sáº¯c phÃ¢n biá»‡t
- **Loading states:** Hiá»ƒn thá»‹ tráº¡ng thÃ¡i loading khi thá»±c hiá»‡n cÃ¡c thao tÃ¡c
- **Error handling:** Xá»­ lÃ½ lá»—i vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o rÃµ rÃ ng 